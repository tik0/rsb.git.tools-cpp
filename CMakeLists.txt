CMAKE_MINIMUM_REQUIRED(VERSION 2.6)

PROJECT("RSB TimeSync")

# --- project settings ---

OPTION(OPTION_BUILD_EXAMPLES "Whether to build the examples or not" TRUE)

SET(LIBRARY_NAME "rsbts")
SET(BINARY_NAME "rsbtimesync")

# --- dependencies ---

FIND_PACKAGE(RSC REQUIRED)
FIND_PACKAGE(RSB REQUIRED)
FIND_PACKAGE(RST REQUIRED)
FIND_PACKAGE(Boost COMPONENTS program_options)
FIND_PACKAGE(ProtocolBuffers REQUIRED)
IF(NOT PROTOBUF_PROTOC_EXECUTABLE)
    MESSAGE(FATAL_ERROR "protoc executable not found")
ENDIF()
IF(NOT PROTOBUF_FOUND)
    MESSAGE(FATAL_ERROR "protocol buffers not found")
ENDIF()

INCLUDE_DIRECTORIES(BEFORE SYSTEM ${RSB_INCLUDE_DIRS}
                                  ${RST_INCLUDE_DIRS}
                                  ${BOOST_INCLUDE_DIRS})

ADD_DEFINITIONS(${RST_CFLAGS})

SET(CMAKE_MODULE_PATH ${CMAKE_MODUKE_PATH} ${RSC_CMAKE_MODULE_PATH})

ADD_SUBDIRECTORY(src)
ADD_SUBDIRECTORY(test)
IF(OPTION_BUILD_EXAMPLES)
    ADD_SUBDIRECTORY(examples)
ENDIF()
